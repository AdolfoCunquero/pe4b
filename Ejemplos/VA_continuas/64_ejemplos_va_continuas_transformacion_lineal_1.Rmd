---
title: "Ejemplos variables aleatorias continuas"
author: "Ricardo Alberich, Juan Gabriel Gomila y Arnau Mir"
date: ''
output:
  beamer_presentation: 
    theme: Warsaw
    includes: 
      in_header: "preamble.tex"
  slidy_presentation:
    incremental: no
  ioslides_presentation:
    incremental: no
---




```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## Coste de la climatización de una piscina (64 205)

Un hotel de alta montaña con pistas de esquí dispone de una piscina  climatizada se estima que en el mes más frío  el coste de $Y$ de la factura energética en euros depende de otra variable aleatoria $T$ que es la temperatura media del mes en grados centígrados según la siguiente relación lineal $Y=1000-6\cdot T$.

Supongamos que la temperatura de ese ese mes sigue una distribución  con media $\mu_T=E(T)=-5$ grados y varianza $\sigma_X^2=Var(X)=4.$

* Calcular la media del coste.
* Calcular la desviación típica del coste.


## Coste de la climatización de una piscina 

Solución



## Transformación de una v.a. $X\equiv N(\mu,\sigma)$ en una normal estándar 

Recordemos que si $X\equiv N(\mu,\sigma)$ entonces $Z=\frac{X-\mu}{\sigma}\equiv N(0,1).$

$$
F_X(x)=P(X\leq x)=P\left(\frac{X-\mu}{\sigma}\leq \frac{x-\mu}{\sigma}\right)=P\left(Z\leq \frac{x-\mu}{\sigma}\right).
$$


## Transformación de una v.a. $X\equiv N(\mu,\sigma)$ en una normal estándar 

Por ejemplo supongamos que $X$ es una $N(\mu=1,sigma=2)$

Calculemos $P(X\leq 1.25)$ de forma directa con $R$ es 

```{r probs_normal,echo=TRUE}
pnorm(1.25,mean=1,sd=2)
```
Aproximando con una normal estándar

$P(X\leq 1.25)=\left(\frac{X-1}{2}\leq \frac{1.25-1}{2}\right)=P\left(Z\leq \frac{2.25-\mu}{\sigma}\right)$



```{r}
mu=1
sigma=2
(1.25-mu)/sigma
pnorm(0.125,mean=0,sd=1)
```


## Cartera de valores 

Supongamos que disponemos de cartera  de renta variable que tiene un valor medio de 500000 euros una desviación estándar de 15000  

Si $X$ es el valor de la cartera y asumimos que tiene distribución aproximadamente normal ¿cuál es la probabilidad de que el valor de la cartera se encuentre entre 485000 y 520000 euros.



## Cartera de valores 
 
 
 
## Cuantiles  de una distribución. Cuantiles de la distribución normal. 
 
 
 
## Gráficos cuantil cuantil (QQplots)
 
 
 
 
```{r qqplot,warnings=FALSE,include=FALSE}
library(qqplotr,quietly=TRUE)
set.seed(2021)
df <- data.frame(normal = round(rnorm(100,0,1),4))
```

```{r qqplot_print,size="scriptsize"}
print(df$normal,width = 60)
```

  

## Gráficos cuantil cuantil (QQplots)
 
 
```{r qqplot2}
print(sort(df$normal),width = 60)
```


## Gráficos cuantil cuantil (QQplots)
 
```{r qqplot3}
qq <- ggplot(data = df, mapping = aes(sample = normal)) +
    stat_qq_band() +
    stat_qq_line(col="red") +
    stat_qq_point(col="blue") +
    labs(x = "Cuantiles teóricos normal", y = "Cuantiles de la muestra normal")
qq
```
 
## Gráficos cuantil cuantil (QQplots)



Generamos 100 valores  aleatorios de una $U(0,10)$.

```{r}
set.seed(2021)
df <- data.frame(uniforme = round(runif(100,min=0,max=10),4))
print(sort(df$uniforme),width = 60)
```


## Gráficos cuantil cuantil (QQplots)

```{r}
qq <- ggplot(data = df, mapping = aes(sample = uniforme)) +
    stat_qq_band() +
    stat_qq_line(col="red") +
    stat_qq_point(col="blue") +
    labs(x = "Cuantiles teóricos normal", y = "Cuantiles de la muestra uniforme")
qq
```

 